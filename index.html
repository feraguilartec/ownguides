<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Experiencia Inmersiva con Vision Pro</title>
    <!-- A-Frame Library -->
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <!-- A-Frame WebXR Hand Tracking -->
    <script src="https://cdn.jsdelivr.net/npm/aframe-xr-hand-tracking@1.2.0/dist/aframe-xr-hand-tracking.min.js"></script>
    <!-- Gaze Pinch Component -->
    <script>
      AFRAME.registerComponent('gaze-pinch-interaction', {
        schema: { default: '' },
        init: function () {
          const el = this.el;

          // Monitor gaze and pinch actions
          this.el.sceneEl.addEventListener('pinchstarted', (evt) => {
            if (evt.detail.intersectedEl === el) {
              el.setAttribute('material', 'color', '#FF5722'); // Highlight on selection
            }
          });

          this.el.sceneEl.addEventListener('pinchended', () => {
            el.setAttribute('material', 'color', '#4CC3D9'); // Revert color
          });
        },
      });
    </script>
  </head>
  <body>
    <a-scene
      vr-mode-ui="enabled: true"
      xrweb="allowedFeatures: [ 'hand-tracking', 'eye-tracking' ]"
    >
      <!-- Entorno -->
      <a-sky color="#ECECEC"></a-sky>

      <!-- Esfera interactiva -->
      <a-sphere
        id="interactive-sphere"
        position="0 1.25 -1"
        radius="0.5"
        color="#4CC3D9"
        class="interactive"
        gaze-pinch-interaction
      ></a-sphere>

      <!-- Controladores para manos -->
      <a-entity
        id="left-hand"
        hand-tracking-controls="hand: left"
        xr-hand-tracking
        hand-model
        position="0 1 -1.5"
      ></a-entity>
      <a-entity
        id="right-hand"
        hand-tracking-controls="hand: right"
        xr-hand-tracking
        hand-model
        position="0 1 -1.5"
      ></a-entity>

      <!-- CÃ¡mara con Gaze Tracking -->
      <a-camera
        position="0 1.6 0"
        look-controls="enabled: true"
        id="gaze-camera"
      >
        <a-entity
          id="cursor"
          cursor="rayOrigin: mouse"
          geometry="primitive: ring; radiusOuter: 0.02; radiusInner: 0.01"
          material="color: black; shader: flat"
        ></a-entity>
      </a-camera>
    </a-scene>
  </body>
</html>
